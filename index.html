<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MAXIMAL-ONE</title>
  <link rel="stylesheet" href="./css/field.css">
  <style>
    :root {
    --field-opacity: 1;
    --field-darkness: 0;
  }     
    body {
      background: #0b0b0b;
      color: #e0e0e0;
      font-family: monospace;
      padding: 40px;
      background: rgba(0,0,0,var(--field-opacity));
      transition: background 0.5s linear;
      background: rgba(0, 0, 0, var(--field-darkness));
      transition: background 0.4s linear;
  }
    .pulse {
      opacity: 0.7;
  }    
    #field {
      margin-top: 20px;
      opacity: 0.6;
      transition: opacity 0.6s ease;
  }
  </style>
</head>
<body>
  <h1>MAXIMAL-ONE</h1>
  <div id="state" class="pulse">waiting…</div>
  <div id="field">…</div>

  <script type="module">
    import { react } from './reactive-core/index.js';
    import { observe } from './observable-surface/observe.js';
    import { witness } from './emergent-witness/witness.js';

export function engage(input) {
  const reaction = react(input);
  const observation = observe(reaction);
  const record = witness(observation);

  return record;
  
    import { mutate } from './mutation/mutate.js';
    import { observe } from './observe/index.js';

export function engage(input) {
  const mutation = mutate(input);
  const observation = observe(mutation);
  return observation;
  
    import { intake } from './intake/intake.js';
    import { observe } from './observe/observe.js';

    const signal = intake("presence");
    const observed = observe(signal);
    
    import { pulse } from './pulse/pulse.js';
    import { witness } from './witness/witness.js';

  const p = pulse();
  const w = witness(p);

  const field = document.getElementById('field');
  field.style.opacity = p.intensity;
  field.innerText = JSON.stringify(w, null, 2);
    
    document.getElementById('state').innerText = JSON.stringify(observed, null, 2);

  import { measurePresence } from './js/presence.js';
  import { applyField } from './js/field.js';
  import { remember } from './js/memory.js';

  const presence = measurePresence();

  setInterval(() => {
    const signal = presence();
    const intensity = applyField(signal);
    remember(intensity);
  }, 500);
  
  import { presenceStream } from "./js/presence.js";
  import { applyDynamics } from "./js/dynamics.js";
  import { observe } from "./js/observer.js";

  const stream = presenceStream();

  setInterval(() => {
    const signal = stream();
    const state = applyDynamics(signal);
    observe(state);
  }, 500);

  import { presenceSignal } from "./js/presence.js";
  import { disturbance } from "./js/disturbance.js";
  import { applyToField } from "./js/field.js";
  import { trace } from "./js/trace.js";

  const sense = presenceSignal();

  setInterval(() => {
    const signal = sense();
    const d = disturbance(signal);
    applyToField(d);
    trace(d);
  }, 500);

  import { sensePresence } from "./js/presence.js";
  import { toDisturbance } from "./js/disturbance.js";
  import { affectField } from "./js/field.js";
  import { storeTrace } from "./js/trace.js";
  import { recallTrace } from "./js/recall.js";

  recallTrace();

  const sense = sensePresence();

  setInterval(() => {
    const signal = sense();
    const d = toDisturbance(signal);
    affectField(d);
    storeTrace(d);
  }, 500);
  </script>
</body>
</html>
